
TITLE BCPSYS
SEARCH	STENEX

ENTRY	GL272	;STACKEND
INTERN	GL267,GL270,GL271,GL273,GL274

GL271:	0	;STACKSTART
GL272:	777777	;STACKEND
GL267:	0	;SAFE17
GL270:	0	;SAFE17BOOL, INITIALLY FALSE

;LABEL GONE TO WHEN STACK OVERFLOWS
GL273:	JRST	.+1
	MOVEM	1,TMPSTK
	MOVEM	16,TMPSTK+3
	MOVEM	17,TMPSTK+4
	MOVEI	1,2
	MOVEM	1,TMPSTK+2
	MOVEI	16,TMPSTK
	ADDI	16,1
	JSP	1,GL274
	SUBI	16,1	;1 HAS 16,,17
	HLR	16,1
	HRR	17,1
	JRST	@TMPSTK

TMPSTK:	BLOCK	40	;SPECIAL STACK FOR HANDLING STACK OVERFLOW ERROR

GL274:	JRST	.+1
	MOVEM	1,0(16)
	HRROI	1,[ASCIZ /
BCPL STACK OVERFLOW
/]
	PSOUT
	HALTF
	JRST	@0(16)

END
